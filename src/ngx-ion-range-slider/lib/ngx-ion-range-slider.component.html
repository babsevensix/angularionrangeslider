<span #ionRangeSlider class="irs irs--{{skin}} js-irs-0" [ngClass]="{
  'irs-with-grid': grid(),
  'irs-disabled': block()
}">
  <span class="irs" #cache_rs>
    <span #cache_line class="irs-line" tabindex="0" (mousedown)="pointerClick('click',$event)"
    (focus)="pointerFocus($event)" (keydown)="keyboard? keyDown( $event): undefined "></span>
    @if (cache.min.isVisible) {
      <span #cache_min class="irs-min">{{cache.min.html}}</span>
    }
    @if (cache.max.isVisible) {
      <span #cache_max class="irs-max">{{cache.max.html}}</span>
    }
    @if (cache.from.isVisible) {
      <span #cache_from class="irs-from"
      [ngStyle]="cache.from.style">{{cache.from.html}}</span>
    }


    @if (cache.to.isVisible) {
      <span #cache_to class="irs-to" [ngStyle]="cache.to.style">{{cache.to.html}}</span>
    }


    @if (cache.single.isVisible) {
      <span #cache_single class="irs-single" (mousedown)="pointerDown('single', $event)"
      [ngStyle]="cache.single.style">{{cache.single.html}}</span>
    }
  </span>
  @if (grid()) {
    <span #cache_grid class="irs-grid" [ngStyle]="cache.grid.style">
      @for (v of smallGridSnap; track v) {
        <span class="irs-grid-pol small" [style]="{
            left: v.left
          }"></span>
      }
      @for (v of bigGridSnap; track v; let idx = $index) {
        <span class="irs-grid-pol" [style]="{
              left: v.left
            }">
        </span>
        <span class="irs-grid-text js-grid-text-{{idx}}" [style]="{
              left: v.left,
              marginLeft: v.marginLeft,
              visibility: v.visibility
            }">{{v.label}}</span>
      }
    </span>
  }

  @if (type() === 'single') {
    @if (cache.bar.isVisible) {
      <span #cache_bar class="irs-bar irs-bar--single" [ngStyle]="cache.bar.style"></span>
    }
    @if (cache.shad_single.isVisible) {
      <span class="irs-shadow shadow-single"
      (mousedown)="pointerClick('click', $event)" [ngStyle]="cache.shad_single.style"></span>
    }
    <span #cache_s_single class="irs-handle single" (mousedown)="pointerDown('single', $event)"
      [ngStyle]="cache.s_single.style"><i></i><i></i><i></i></span>
    }


    @if (type() === 'double') {
    <span #cache_bar class="irs-bar" [style]="{
              left:  coords.p_bar_x+'%',
              width: coords.p_bar_w+'%'
          }" (mousedown)="drag_interval ? pointerDown('both', $event) : pointerClick('click', $event)"></span>
      @if (cache.shad_from.isVisible) {
        <span class="irs-shadow shadow-from" [ngStyle]="cache.shad_from.style"
        (mousedown)="pointerClick('click', $event)"></span>
      }
      @if (cache.shad_to.isVisible) {
        <span class="irs-shadow shadow-to" [ngStyle]="cache.shad_to.style"
        (mousedown)="pointerClick('click', $event)"></span>
      }
      <span #cache_s_from class="irs-handle from" (mousedown)="pointerDown('from', $event)"
        [ngStyle]="cache.s_from.style"><i></i><i></i><i></i></span>
        <span #cache_s_to class="irs-handle to" (mousedown)="pointerDown('to', $event)"
          [ngStyle]="cache.s_to.style"><i></i><i></i><i></i></span>
        }


        @if (block()) {
          <span class="irs-disable-mask"></span>
        }

      </span>
      <!--irs-disabled-->


      @if (showDebugInfo()) {
        <div style="display: grid; grid-template-columns: 1fr 1fr;">
          <pre style="font-size: smaller;">
            this.coords.big_w:{{coords.big_w | json}}
            <!-- bigGridSnap: {{bigGridSnap | json}} -->
          </pre>
          <pre style="font-size: smaller;">
            target:{{target}}
            coords.p_bar_x:{{coords.p_bar_x}}
            coords.p_bar_w:{{coords.p_bar_w}}
            cache.from.style.left:<input type="text" [value]="cache.from.style.left" />
            cache.from.style.width:{{cache.from.style.width}}
            <!-- coords.x_pointer:{{coords.x_pointer}}
            coords.x_gap:{{coords.x_gap}}
            coords.p_gap_left:{{coords.p_gap_left}}
            coords.p_gap_right:{{coords.p_gap_right}}
            coords.p_from_fake:{{coords.p_from_fake}}
            coords.p_to_fake:{{coords.p_to_fake}}
            coords.p_pointer:{{coords.p_pointer}} -->
            <!-- cache_to: {{cache.to | json}}
            w_to: {{labels.w_to}}
            p_to_left: {{labels.p_to_left}}
            p_to_fake: {{labels.p_to_fake}}
            ionRangeSlider_w :{{ionRangeSlider.offsetWidth}}
            dragging:{{dragging}}
            from: {{from}} - to: {{to}}<br>
            force_redraw: {{force_redraw}}<br>
            old_from: {{old_from}} - result.from {{result.from}}<br>
            old_to: {{old_to}} - result.to {{result.to}}<br>
            is_key: {{is_key}}<br>
            coords.x_gap{{coords.x_gap}} -->
            <!--  {{cache.single | json}}<br>-->
            <!--  {{cache.s_single | json}}<br>-->
            {{labels | json}}<br>
            coords.x_pointer{{coords.x_pointer}}
            coords.w_rs {{coords.w_rs}}
            <!--  {{result | json}}<br>-->
            <!--  {{coords | json}}-->
          </pre>
        </div>
      }
